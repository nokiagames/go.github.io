<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宇宙冲击</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>宇宙冲击</h1>
        <canvas id="gameCanvas" width="320" height="480" style="background-color: #001100;"></canvas>
        <p><a href="index.html">返回主菜单</a></p>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        let spaceship = { x: 150, y: 400, width: 20, height: 20 };
        let bullets = [];
        let enemies = [];
        let score = 0;

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') spaceship.x -= 20;
            if (e.key === 'ArrowRight') spaceship.x += 20;
            if (e.key === ' ') bullets.push({ x: spaceship.x + 8, y: spaceship.y - 10 });
        });

        function spawnEnemies() {
            const x = Math.floor(Math.random() * (canvas.width - 20));
            enemies.push({ x, y: 0, width: 20, height: 20 });
        }

        function updateGame() {
            bullets = bullets.map(b => ({ ...b, y: b.y - 10 })).filter(b => b.y > 0);
            enemies = enemies.map(e => ({ ...e, y: e.y + 5 }));
            enemies.forEach((enemy, ei) => {
                bullets.forEach((bullet, bi) => {
                    if (bullet.x < enemy.x + enemy.width && bullet.x + 5 > enemy.x &&
                        bullet.y < enemy.y + enemy.height && bullet.y + 10 > enemy.y) {
                        enemies.splice(ei, 1);
                        bullets.splice(bi, 1);
                        score++;
                    }
                });
                if (enemy.y > canvas.height) {
                    alert('Game Over! Score: ' + score);
                    location.reload();
                }
            });
        }

        function drawGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00ff00';
            ctx.fillRect(spaceship.x, spaceship.y, spaceship.width, spaceship.height);
            ctx.fillStyle = 'red';
            bullets.forEach(b => ctx.fillRect(b.x, b.y, 5, 10));
            ctx.fillStyle = 'yellow';
            enemies.forEach(e => ctx.fillRect(e.x, e.y, e.width, e.height));
        }

        function gameLoop() {
            updateGame();
            drawGame();
        }

        setInterval(gameLoop, 100);
        setInterval(spawnEnemies, 1000);
    </script>
</body>
</html>
