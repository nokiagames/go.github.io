<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>打砖块</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>打砖块</h1>
        <canvas id="gameCanvas" width="320" height="480" style="background-color: #001100;"></canvas>
        <p><a href="index.html">返回主菜单</a></p>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const paddle = { x: 140, y: 450, width: 80, height: 10 };
        const ball = { x: 160, y: 430, dx: 2, dy: -2, radius: 5 };
        const bricks = [];
        const brickRowCount = 5;
        const brickColumnCount = 8;
        const brickWidth = 35;
        const brickHeight = 15;
        let score = 0;

        for (let r = 0; r < brickRowCount; r++) {
            for (let c = 0; c < brickColumnCount; c++) {
                bricks.push({ x: c * (brickWidth + 5) + 10, y: r * (brickHeight + 5) + 10, destroyed: false });
            }
        }

        document.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            paddle.x = e.clientX - rect.left - paddle.width / 2;
        });

        function updateGame() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            if (ball.x < 0 || ball.x > canvas.width) ball.dx *= -1;
            if (ball.y < 0) ball.dy *= -1;

            if (ball.x > paddle.x && ball.x < paddle.x + paddle.width && ball.y > paddle.y) {
                ball.dy *= -1;
            }

            bricks.forEach(brick => {
                if (!brick.destroyed && ball.x > brick.x && ball.x < brick.x + brickWidth && ball.y > brick.y && ball.y < brick.y + brickHeight) {
                    ball.dy *= -1;
                    brick.destroyed = true;
                    score++;
                }
            });

            if (ball.y > canvas.height) {
                alert('Game Over! Score: ' + score);
                location.reload();
            }
        }

        function drawGame() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00ff00';
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fill();

            bricks.forEach(brick => {
                if (!brick.destroyed) {
                    ctx.fillRect(brick.x, brick.y, brickWidth, brickHeight);
                }
            });
        }

        function gameLoop() {
            updateGame();
            drawGame();
        }

        setInterval(gameLoop, 10);
    </script>
</body>
</html>
